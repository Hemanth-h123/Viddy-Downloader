{% extends "base.html" %}

{% block title %}Viddy Downloader - Download Videos from Any Platform{% endblock %}

{% block body_class %}home-page{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-10">
        <div class="card shadow-lg">
            <div class="card-body">
                <h1 class="text-center mb-4">
                    <i class="fas fa-download text-primary me-2"></i>
                    Viddy Downloader
                </h1>
                <p class="lead text-center mb-4">
                    Download videos and images from Facebook, Instagram, Twitter, TikTok, Vimeo, Pinterest, LinkedIn, and more!
                </p>
                
                {% if current_user.is_authenticated %}
                    <form method="POST" action="{{ url_for('download') }}" class="mb-4">
                        {{ form.hidden_tag() }}
                        <div class="input-group mb-3">
                            {{ form.url(class="form-control form-control-lg", placeholder="Paste video or image URL here...") }}
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-download me-2"></i> Download
                            </button>
                        </div>
                        {% if form.url.errors %}
                            <div class="text-danger">
                                {% for error in form.url.errors %}
                                    <small>{{ error }}</small>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </form>
                {% else %}
                    <div class="text-center mb-4">
                        <a href="{{ url_for('login') }}" class="btn btn-primary btn-lg me-2">
                            <i class="fas fa-sign-in-alt me-2"></i>Login to Download
                        </a>
                        <a href="{{ url_for('register') }}" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-user-plus me-2"></i>Register
                        </a>
                    </div>
                {% endif %}
            </div>
        </div>

        {% if not current_user.is_authenticated or not current_user.is_premium() %}
        <div class="card shadow-lg mt-4">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-8">
                        <h4><i class="fas fa-crown text-warning me-2"></i>Go Premium!</h4>
                        <p class="mb-0">Unlock all features including faster downloads, no ads, and priority support.</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <a href="{{ url_for('premium') }}" class="btn btn-warning">
                            <i class="fas fa-star me-1"></i> Upgrade Now
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add animation to the download button
    const downloadBtn = document.querySelector('button[type="submit"]');
    if (downloadBtn) {
        downloadBtn.addEventListener('click', function(e) {
            const urlInput = document.getElementById('url');
            if (urlInput && !urlInput.value.trim()) {
                e.preventDefault();
                urlInput.classList.add('is-invalid');
                
                // Add shake animation
                this.classList.add('shake');
                setTimeout(() => {
                    this.classList.remove('shake');
                }, 500);
            }
        });
    }

    // Auto-focus URL input on page load
    const urlInput = document.getElementById('url');
    if (urlInput) {
        urlInput.focus();
        
        // Clear error state when user starts typing
        urlInput.addEventListener('input', function() {
            if (this.value.trim()) {
                this.classList.remove('is-invalid');
            }
        });
    }
});
</script>
{% endblock %}
